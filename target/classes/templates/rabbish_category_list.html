<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>垃圾类别管理</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <script src="js/common.js"></script>
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js"-->
<!--            integrity="sha384-L2pyEeut/H3mtgCBaUNw7KWzp5n9+4pDQiExs933/5QfaTh8YStYFFkOzSoXjlTb"-->
<!--            crossorigin="anonymous"></script>-->
    <link rel="stylesheet" href="css/rabbishcategory.css">
</head>
<body>
<div id="top">
    <img style="width: 43px;margin-left: 110px;" src="/images/mju.png"/><span style="font-weight: bold">计算机与控制工程学院</span>
    <h6>你好！<span  th:text="${session.user.username}">xxx</span><a href="/logout" id="exit">&nbsp&nbsp退出</a></h6>
    <input th:if="${#httpServletRequest.getRequestURL() eq 'http://localhost:8080/checkImagePage'} " onclick="window.location.href='/'" class="btn btn-primary" type="button" value="拍摄图片"/>
    <input onclick="window.location.href='/collect'" class="btn btn-primary" type="button" id="picture" value="采集信息管理"/>
    <input onclick="window.location.href='/rabbish_category_list'" class="btn btn-primary" type="button" value="分类管理"/>
</div>
<div id="content">
    <br/>
    <h1 class="label label-info">垃圾类别管理</h1>
    <br/>
    <br/>
    <table id="rabbishTable" class="table table-bordered">
        <thead>
        <tr>
            <!--        <th><input id="selectAll" type="checkbox"/>全选</th>-->
            <th>ID</th>
            <th>垃圾名称</th>
            <th>总计</th>
            <th>编辑</th>
            <th>删除</th>
            <th>导出</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item:${rabbishList}">
            <!--        <th><input type="checkbox" id="chooseInfo" name="imgId" th:value="${item.id}"/></th>-->
            <th th:text="${item.id}">1</th>
            <td>
                <a id="rabbishName" th:text="${item.name}" th:href="'rabbish_imagePage?id='+${item.id}"><span
                        class="glyphicon glyphicon-edit"></span>
                </a>
            </td>
            <td th:text="${item.count}"></td>
            <!--        <td><a class="operation" style="color: rgb(153,153,153)" th:href="'/approval?imgId='+${item.id}">审批</a>-->
            <!--            <a class="operation" style="color: rgb(153,153,153)" href="javascript:;" th:onclick="'delImage('+${item.id}+')'" >删除</a>-->
            <!--        </td>-->
            <td><a th:href="'rabbish_category_editPage?id='+${item.id}"><span
                    class="glyphicon glyphicon-edit"></span></a></td>
            <td><a href="javascript:void(0);" th:onclick="'delRabbish('+${item.id}+')'"><span class="glyphicon glyphicon-trash"></span></a>
                <span style="color: red;" th:text="${delerrMsg}"></span>
            </td>
            <td><a href="javascript:void (0);" th:onclick="'zipFile('+${item.id}+',\'rabbish\')'"><span class="glyphicon glyphicon-log-out"></span></a></td>
        </tr>
        </tbody>

    </table>
</div>
<div class="panel panel-warning editDiv" style="width: 400px;margin: 0px auto;">
    <div class="panel-heading">新增分类</div>
    <div class="panel-body">
        <table class="editTable">
            <tbody>
            <form th:action="@{rabbish_category_add}">
                <tr>
                    <td>分类名称</td>
                    <td><input id="name" name="name" type="text" class="form-control"></td>
                </tr>
                <tr class="submitTR">
                    <td align="center" colspan="2">
                        <input type="button" onclick="addRabbish()" class="btn btn-success" th:value="提交">
                        <span style="color: red" th:text="${errMsg}"></span>
                    </td>
                </tr>
            </form>
            </tbody>
        </table>
    </div>
</div>
</body>
<script>
    function addRabbish() {
        var name = $('#name').val();
        if (name == "") {
            alert("分类名称不能为空");
            return false;
        }
        $("form").submit();
    }

    function delRabbish(id) {
        var sure = confirm("确认要删除吗?");
        if (sure) {
            window.location.href = "/rabbish_category_del?id="+id;
        }
    }
</script>
</html>